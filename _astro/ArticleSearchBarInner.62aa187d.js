import{h as S,_ as A}from"./hooks.module.b1431384.js";import{u as v}from"./useClickOutside.088c6c5d.js";import{o as l}from"./jsxRuntime.module.1b1126d6.js";import{k}from"./preact.module.4d513d4a.js";const w=[{consonant:"ㄱ",startSyllable:"가"},{consonant:"ㄲ",startSyllable:"까"},{consonant:"ㄴ",startSyllable:"나"},{consonant:"ㄷ",startSyllable:"다"},{consonant:"ㄸ",startSyllable:"따"},{consonant:"ㄹ",startSyllable:"라"},{consonant:"ㅁ",startSyllable:"마"},{consonant:"ㅂ",startSyllable:"바"},{consonant:"ㅃ",startSyllable:"빠"},{consonant:"ㅅ",startSyllable:"사"},{consonant:"ㅆ",startSyllable:"싸"},{consonant:"ㅇ",startSyllable:"아"},{consonant:"ㅈ",startSyllable:"자"},{consonant:"ㅉ",startSyllable:"짜"},{consonant:"ㅊ",startSyllable:"차"},{consonant:"ㅋ",startSyllable:"카"},{consonant:"ㅌ",startSyllable:"타"},{consonant:"ㅍ",startSyllable:"파"},{consonant:"ㅎ",startSyllable:"하"}].reduce((e,s)=>{const a=s.startSyllable.charCodeAt(0),t=a+587;return{...e,[s.consonant]:{start:a,end:t}}},{}),E=e=>{const s=t=>/[ㄱ-ㅎ]/.test(t),a=t=>/[가-힣]/.test(t);if(s(e)){const{start:t,end:n}=w[e];return`[${e}\\u${t.toString(16)}-\\u${n.toString(16)}]`}else if(a(e)){const t="가".charCodeAt(0),n=e.charCodeAt(0)-t;if(n%28>0)return e;{const r=Math.floor(n/28)*28+t,o=r+27;return`[\\u${r.toString(16)}-\\u${o.toString(16)}]`}}else return(n=>{const r=/[\\^$.*+?()[\]{}|]/g,o=RegExp(r.source);return n&&o.test(n)?n.replace(r,"\\$&"):n||""})(e)},M=e=>{const s=e.split("").map(E).map(a=>"("+a+")").join(".*?");return new RegExp(s,"i")};function L({articles:e}){const[s,a]=S(""),[t,n]=S([]),[r,o]=S(!1),z=()=>{o(!1)},f=A();return v(f,z),l("div",{class:"relative",children:[l("input",{class:"w-full px-4 py-2 border-2 rounded-3xl bg-zinc-100 dark:bg-zinc-900 border-zinc-300 dark:border-zinc-700",type:"text",value:s,onInput:h=>{const u=h.target.value;if(a(u),!u)n([]);else{const C=M(u),x=e.filter(c=>C.test(c.title)).map(c=>{let i=0;const $=c.title.replace(C,(m,...O)=>{const g=O.slice(0,u.length);let d=0,b=[];for(let p=0,R=g.length;p<R;p++){const y=m.indexOf(g[p],d);b.push(m.substring(d,y)),b.push(`<mark>${g[p]}</mark>`),d>0&&(i=Math.max(i,y-d)),d=y+1}return b.join("")});return{...c,longestDistance:i,rawHighlightedTitle:$}});x.sort((c,i)=>c.longestDistance-i.longestDistance),n(x)}o(!0)},placeholder:"키워드를 입력하세요"}),r&&l("div",{class:"absolute left-0 right-0 bg-white dark:bg-black mt-2 px-4 py-2 border-2 rounded-3xl",ref:f,children:[t.length>0&&l(k,{children:[l("p",{children:[t.length,"건의 검색 결과:"]}),l("ul",{class:"divide-y",children:t&&t.map(h=>l("li",{children:l("a",{class:"block py-1",href:`/articles/${h.path}`,dangerouslySetInnerHTML:{__html:h.rawHighlightedTitle}})}))})]}),t.length<=0&&l(k,{children:l("p",{children:"검색 결과가 없습니다."})})]})]})}export{L as default};
